# Техническое задание (полное, MVP + Pilot)

**Продукт:** Cortex OS — операционная система эффективности и благополучия (Enterprise Human Capital Performance Platform)  
**Регион:** РФ/СНГ  
**Версия документа:** v1.0 (на основе брифа)  

---

## 0. Цель и ожидаемый эффект

Cortex OS — интеллектуальный слой, который интегрируется в корпоративные системы и помогает сотрудникам сохранять ресурс, входить в поток и убирать трение в работе. MVP/пилот должен доказать полезность для сотрудников и измеримый эффект для бизнеса.

Цели MVP:
- Снизить хаос коммуникаций и встреч, повысить концентрацию.
- Дать сотруднику понятный личный фидбек и рекомендации.
- Дать руководителям агрегированную картину состояния команд без нарушения приватности.

---

## 1. Границы MVP и этапы

### 1.1. Входит в MVP (пилот 3 месяца)
- Сбор данных из 3 потоков (задачи, коммуникации, календарь), опционально — телеметрия с носимых устройств (строго opt-in).
- Личный профиль благополучия (микро‑опросы PERMA, дневник благодарности).
- Bio‑rhythm sync (хронотип + тихие часы + «золотые часы»).
- Flow Engine (детектор скуки/тревоги) и базовая геймификация.
- Context Co‑pilot (RAG‑поиск по корпоративной базе знаний).
- Calendar Guard (буферы, days of deep work, калькулятор стоимости встречи).
- Kind Communication (предупреждение токсичности в рабочей переписке).
- Happiness Heatmap (агрегация по командам, 5+ человек).
- Empathy Leader (подсказки лидеру для 1‑on‑1).
- People Analytics (базовые риски выгорания и ROI‑калькулятор).
- Enterprise Core (SSO, RBAC, аудит, хранение данных в РФ).

### 1.2. Не входит в MVP (backlog / phase 2)
- Глубокая телеметрия (широкая интеграция wearable‑устройств).
- Продвинутая персонализация на уровне психометрии beyond VIA.
- Продвинутая реабилитация/медицинские сценарии (запрещены).
- Публичные соцмеханики за пределами рабочих каналов.

---

## 2. Пользователи и роли (RBAC)

Минимальный набор ролей для MVP:
- **Сотрудник:** личный профиль, рекомендации, чат‑бот, просмотр своих метрик.
- **Руководитель команды:** агрегированные данные по своей команде (>=5 сотрудников), подсказки для 1‑on‑1, без доступа к личным чатам.
- **HR/People Ops:** агрегированные метрики по подразделениям, настройка опросов, текстов и политик.
- **IT/Администратор:** подключение интеграций, управление доступами, настройка SSO, аудит.

Правила доступа:
- Личная переписка и персональные ответы сотрудников недоступны руководителям.
- Все агрегированные метрики доступны только при размере группы >=5 человек.
- Данные сотрудника доступны только ему и системе (ИИ‑помощнику) в рамках персональных сценариев.

---

## 3. Каналы и интерфейсы

### 3.1. Каналы MVP
- **Чат‑бот**: MS Teams или Telegram (корпоративный) — выбор в пилоте.
- **Веб‑кабинет**: личный кабинет сотрудника и панели HR/руководителей.

### 3.2. Основные интерфейсы
- Личный кабинет сотрудника (счастье/энергия/поток в динамике).
- Панель лидера (heatmap команды + подсказки для 1‑on‑1).
- Панель HR (агрегированные метрики и тренды).
- Админ‑панель (интеграции, пользователи, настройки политики).

---

## 4. Архитектура (MVP)

### 4.1. Data Layer
Система строит «цифровую тень» рабочего дня, собирая данные из четырех потоков:
1) **Task Trackers**: Jira (MVP), возможность подключить Bitrix24/Kaiten далее.
2) **Communication**: MS Teams или Telegram (корпоративный). Анализируется рабочая переписка, без личных чатов.
3) **Calendar**: MS Outlook (MVP). Возможность Google/Yandex далее.
4) **Telemetry (optional)**: Apple Health/Google Fit/Garmin — только с явного согласия.

Собираемые данные:
- Задачи: статусы, длительности, количество переключений, “зависшие” задачи.
- Коммуникация: метаданные, скорость ответов, общий тон (sentiment), без содержания личных чатов.
- Календарь: плотность встреч, наложения, длина рабочего дня.
- Телеметрия: HRV, сон, активность (opt‑in).

### 4.2. AI Core
- **LLM Orchestrator:** OpenRouter.
- **Основная модель:** Xiaomi (по умолчанию).
- **Продвинутая модель:** Кимика 2 (опционально).
- **Privacy Firewall:** маскирование PII (ФИО, телефоны, e‑mail, номера карт, суммы контрактов) до отправки в LLM.
- **RAG‑поиск:** индекс корпоративной базы знаний с ответом «по сути», без выдачи «портянок».
- **Fallback:** если LLM недоступен — ответы по шаблонам + краткий совет.

---

## 5. Политика согласия и приватности (MVP, без оверинжиниринга)

### 5.1. Согласие
- Явное согласие на участие в системе при первом запуске.
- Отдельный opt‑in на телеметрию (wearables).
- Возможность временно приостановить участие (pause).

### 5.2. Приватность и границы
- Личные чаты и личные сообщения не анализируются.
- Любой просмотр на стороне руководителей — только агрегированно (>=5 человек).
- Система не ставит медицинских диагнозов.
- Контент сообщений используется только для локального пред‑анализа и/или RAG‑ответов, без хранения полной переписки.

### 5.3. Хранение
- Сырые события: хранение до 90 дней (по умолчанию, настраивается).
- Агрегированные метрики: до 12 месяцев.
- Удаление данных по запросу сотрудника в срок до 30 дней.
- Хранение и обработка персональных данных — в РФ (152‑ФЗ).

---

## 6. Конфигурируемость

Все триггеры и пороги в системе должны быть настраиваемыми на уровне компании (через админ‑панель). По умолчанию использовать базовые значения из брифа.

Примеры параметров:
- **Flow Engine:**
  - «Скука»: закрытие задач быстрее N минут + частое переключение контекста.
  - «Тревога»: задача In Progress более X часов без активности.
- **Calendar Guard:** буфер 10–15 минут; лимит встреч в день; запрет встреч в Deep Work Day.
- **Right to Disconnect:** запрет уведомлений после N времени.
- **Kind Communication:** уровень «агрессивности» текста от X баллов.

---

## 7. Функциональные требования (MVP)

### 7.1. Digital Happiness Profile
- Еженедельные микро‑опросы PERMA (2 вопроса).
- Визуализация динамики состояния сотрудника.
- Дневник благодарности 2.0 (короткий ежедневный вопрос).

### 7.2. Bio‑rhythm Sync
- Определение хронотипа (MCTQ).
- Разметка «золотых часов» в календаре.
- Тихая доставка сообщений вне рабочего времени.

### 7.3. Flow Engine
- Детекторы скуки/тревоги на основе задач и активности.
- Режим «спринта» (игровой вызов) и режим «ментор» (декомпозиция).

### 7.4. Context Co‑pilot
- RAG‑поиск по корпоративным документам.
- Ответы в формате «шаг 1–2–3».
- Контекстные подсказки «just‑in‑time».

### 7.5. Calendar Guard
- Авто‑буферы после встреч.
- День тишины (deep work day).
- Калькулятор стоимости встреч.

### 7.6. Kind Communication
- Пред‑анализ сообщения перед отправкой.
- Предложение более конструктивной формулировки.

### 7.7. Ethical Safety
- No Diagnosis Protocol.
- SOS‑кнопка (контакты ДМС/психологической помощи).
- Ethical Wall: запрещён доступ к личным данным руководителя.

### 7.8. Happiness Heatmap
- Тепловая карта состояния отделов (>=5 человек).
- Метрики: энергия, смысл, баланс нагрузки.

### 7.9. Empathy Leader
- Подготовка к 1‑on‑1: подсказки по состоянию сотрудника (агрегировано, без частных данных).

### 7.10. People Analytics
- Прогноз риска выгорания/ухода (высокий/средний/низкий).
- ROI‑калькулятор по встречам и времени.

### 7.11. Enterprise Core
- SSO (AD/Keycloak).
- RBAC.
- Аудит действий.

### 7.12. Детализация по модулям и критерии приемки (MVP)

**Data Layer (Tasks/Comms/Calendar)**  
Требования: подключение Jira + Outlook + Teams/Telegram, нормализация событий, расписание синхронизации.  
Критерии приемки: данные из 3 источников поступают ежедневно; ошибки интеграций логируются; задержка обновления не более 24 часов.

**Privacy Firewall**  
Требования: маскирование PII до отправки в LLM (ФИО, телефоны, e‑mail, номера карт/договоров).  
Критерии приемки: примеры PII в тестовых данных не уходят в LLM; маски видны в логах/аудите.

**LLM Orchestrator (OpenRouter)**  
Требования: выбор модели (Xiaomi по умолчанию, Кимика 2 опционально), таймауты, fallback на шаблоны.  
Критерии приемки: админ может переключить модель; при таймауте LLM выдаётся шаблонный ответ.

**RAG‑поиск (Context Co‑pilot)**  
Требования: индексирование базы знаний, ответы в формате «шаг 1–2–3», ссылки на источник.  
Критерии приемки: бот отвечает на запрос с кратким алгоритмом и ссылкой на документ.

**Digital Happiness Profile**  
Требования: микро‑опрос PERMA раз в неделю, дневник благодарности.  
Критерии приемки: опросы приходят по расписанию; результаты видны сотруднику; HR видит агрегаты.

**Bio‑rhythm Sync**  
Требования: MCTQ‑опрос, разметка «золотых часов», «тихая доставка» сообщений.  
Критерии приемки: «золотые часы» отображаются в календаре; уведомления не приходят в тихие часы.

**Flow Engine**  
Требования: триггеры скуки/тревоги, режим «спринт» и режим «ментор», конфигурируемые пороги.  
Критерии приемки: триггеры срабатывают на тестовых сценариях; пользователь может принять/отклонить интервенцию.

**Calendar Guard**  
Требования: буфер после встреч, день тишины, калькулятор стоимости встречи.  
Критерии приемки: буфер добавляется автоматически; инвайты в день тишины отклоняются; стоимость показывается при создании встречи.

**Kind Communication**  
Требования: пред‑анализ текста, предложение более конструктивной формулировки.  
Критерии приемки: при агрессивном тексте появляется предупреждение и альтернативный вариант; пользователь может отправить исходный текст.

**Ethical Safety**  
Требования: No Diagnosis Protocol, SOS‑кнопка, анонимность для руководителей.  
Критерии приемки: SOS возвращает контакты помощи; персональные данные не отображаются руководителям.

**Happiness Heatmap**  
Требования: агрегированные метрики по отделам (>=5 человек).  
Критерии приемки: отделы с <5 сотрудниками скрыты; метрики обновляются не реже 1 раза в неделю.

**Empathy Leader**  
Требования: подсказки для 1‑on‑1 на базе агрегированных данных.  
Критерии приемки: лидер получает краткий бриф перед встречей; в брифе нет личных цитат или сообщений.

**People Analytics**  
Требования: риск выгорания/ухода (низкий/средний/высокий), ROI‑калькулятор.  
Критерии приемки: риск отображается на уровне команды; ROI рассчитывается из сокращения времени встреч и «возвращённых часов».

**Enterprise Core**  
Требования: SSO, RBAC, аудит.  
Критерии приемки: вход через AD/Keycloak; доступы соответствуют ролям; аудит фиксирует изменения настроек.

**Админ‑панель (MVP)**  
Требования: управление интеграциями, модулями, порогами, наградами, ролями.  
Критерии приемки: настройки сохраняются; модули включаются/выключаются без перезапуска; каталог наград редактируется.

---

## 8. Нефункциональные требования (MVP)

- **Доступность:** 99.5% в месяц.
- **Время ответа бота:** до 3 сек для простых ответов; до 10 сек для RAG/LLM.
- **Безопасность:** TLS, шифрование данных at‑rest, аудит доступа.
- **Наблюдаемость:** базовые логи, метрики ошибок, дашборд состояния интеграций.
- **Масштабируемость:** до 2 000 пользователей в пилоте без деградации.

---

## 9. Метрики успеха пилота (предлагаемые)

- **Активность пользователей:** 50%+ еженедельной активности (WAU).
- **Снижение перегруза встречами:** минус 10–15% общей длительности встреч.
- **Улучшение индекса энергии/смысла:** +10% по PERMA‑метрикам.
- **Время ответа в чатах:** снижение среднего времени реакции на 10–20%.
- **Качество 1‑on‑1:** рост доли запланированных встреч с лидами.
- **Качественная обратная связь:** 60%+ сотрудников отмечают пользу.

---

## 10. Геймификация и награды (свобода для заказчика)

Принципы (минимальный набор для MVP):
- **Прогресс:** уровни и визуальные индикаторы прогресса.
- **Обратная связь:** мгновенная похвала за завершённую задачу.
- **Вызовы:** короткие спринты/челленджи.
- **Автономия:** пользователь сам выбирает награды.
- **Признание:** публичные благодарности (в рабочих каналах).

Награды (настраиваемые заказчиком):
- Время: «поздний приход», «доп. перерыв».
- Образование: курсы, книги, конференции.
- Благотворительность: донат от компании.
- Корпоративный мерч.

Система должна позволять:
- Добавлять/удалять награды в админ‑панели.
- Настраивать стоимость в «Cortex Coins».
- Отключать геймификацию полностью.

---

## 11. Дорожная карта пилота

- **Месяц 1 (Тихий режим):** подключение интеграций, baseline по метрикам.
- **Месяц 2 (Эпоха заботы):** включение персональных модулей и RAG.
- **Месяц 3 (Культура потока):** аналитика для менеджеров + активные интервенции.

---

## 12. Критерии приёмки MVP

- Собираются данные из 3 потоков (tasks, comms, calendar) с корректной агрегацией.
- Бот работает в выбранном канале (Teams/Telegram).
- Все модули MVP включаются/отключаются через админ‑панель.
- Персональные данные не доступны руководителям.
- Метрики пилота считаются автоматически.
